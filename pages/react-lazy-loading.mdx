# ЁЯзСтАНЁЯПл React Lazy Loading

### ржнрж╛ржмрзБржи ржЖржкржирж┐ ржмрж▓ржЫрзЗржи тАФ

> тАЬржжрзЛрж╕рзНржд, ржЬрж╛ржирзЛ рждрзЛ, ржЖржорж░рж╛ ржпржЦржи ржЕрзНржпрж╛ржк ржмрж╛ржирж╛ржЗ, рждржЦржи рж╕ржм ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржХрж╕рж╛ржерзЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рж┐ред ржХрж┐ржирзНрждрзБ рж╕ржм рж╕ржорзЯ рждрзЛ ржЗржЙржЬрж╛рж░ рж╕ржм ржкрзЗржЗржЬрзЗ ржпрж╛рзЯ ржирж╛, рждрж╛ржЗ ржирж╛?тАЭ

ржПржЗ ржЪрж┐ржирзНрждрж╛ ржерзЗржХрзЗржЗ ржЖрж╕рзЗ ЁЯСЙ **Lazy Loading** тАФ ржпрзЗржЯрж╛ ржмрж▓рзЗ:

> "ржпржЦржи ржжрж░ржХрж╛рж░ рждржЦржиржЗ рж▓рзЛржб ржХрж░рзЛ, ржЖржЧрзЗ ржирж╛ред"

---

## ЁЯФе ржЖрж╕рж▓ рж╕ржорж╕рзНржпрж╛ ржХрзА?

React ржП ржЖржорж░рж╛ рж╕рж╛ржзрж╛рж░ржгржд рж╕ржм ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржХрж╕рж╛ржерзЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рж┐:

```js
import MarkdownPreview from "./MarkdownPreview.js";
```

_рждрж╛рждрзЗ рж╣рзЯ ржХрзА?_

- ржкрзБрж░рзЛ ржЕрзНржпрж╛ржк ржПржХрж╕рж╛ржерзЗ ржмрж╛ржирзНржбрзЗрж▓ рж╣рзЯ
- ржкрзНрж░ржержоржмрж╛рж░ рж╕рж╛ржЗржЯ ржЦрзЛрж▓рж╛рж░ рж╕ржорзЯ рж╕ржм ржХрж┐ржЫрзБржЗ ржбрж╛ржЙржирж▓рзЛржб рж╣рзЯ
- ржЗржЙржЬрж╛рж░ рж╣рзЯ ржмрж┐рж░ржХрзНржд ЁЯШл

---

## ЁЯТб рж╕ржорж╛ржзрж╛ржи: Lazy Loading

React ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржжрж┐рзЯрзЗржЫрзЗ ЁЯСЙ `React.lazy()`
_ржпрзЗржЯрж╛ ржмрж▓рзЗ: тАЬржЖржорж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ рждржЦржиржЗ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░ржм, ржпржЦржи ржЗржЙржЬрж╛рж░ ржУржЯрж╛ ржжрзЗржЦрждрзЗ ржЪрж╛ржЗржмрзЗредтАЭ_

---

## ЁЯЪА ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ Lazy Loading рж╢рзЗржЦрж╛ ржпрж╛ржХ

---

### ЁЯзй Step 1: Lazy ржХрж░рзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЗржорзНржкрзЛрж░рзНржЯ

```js
import { lazy } from "react";

const MarkdownPreview = lazy(() => import("./MarkdownPreview.js"));
```

ЁЯТб ржоржирзЗ рж░рж╛ржЦрзЛ:

- ржПржЗ `import()` asynchronous
- рждрж╛ржЗ ржПржЯрж╛ рждржЦржиржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ, ржпржжрж┐ рждрзБржорж┐ ржПржЯрж╛ржХрзЗ `Suspense` ржжрж┐рзЯрзЗ wrap ржХрж░рзЛ

---

### ЁЯзй Step 2: Suspense ржжрж┐рзЯрзЗ ржзрж░рзЛ

```js
import { Suspense } from "react";

<Suspense fallback={<p>тП│ Loading...</p>}>
  <MarkdownPreview markdown="Hello, **world**!" />
</Suspense>;
```

ЁЯУМ ржПржЗ fallback UI рж╣ржЪрзНржЫрзЗ ржЖржкржирж╛рж░ loading spinner ржмрж╛ skeletonред
MarkdownPreview ржпрждржХрзНрж╖ржг ржирж╛ ржЖрж╕ржЫрзЗ, React ржПржЗ fallback ржжрзЗржЦрж╛ржмрзЗред

---

## ЁЯОо ржЪрж▓ ржПржХржЯрж╛ ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг ржмрж╛ржирж╛ржЗ

### тЬЕ ржЖржкржирж┐ ржЪрж╛ржЗржЫрзЗржи, Preview ржмрж╛ржЯржи ржЪрж╛ржкрж▓рзЗржЗ Lazy Component рж▓рзЛржб рж╣рзЛржХ

```js
import React, { lazy, Suspense, useState } from "react";

const MarkdownPreview = lazy(() => import("./MarkdownPreview.js"));

function App() {
  const [showPreview, setShowPreview] = useState(false);

  return (
    <div>
      <h1>React Lazy Loading Example</h1>
      <button onClick={() => setShowPreview((prev) => !prev)}>
        Toggle Preview
      </button>
      <hr />
      {showPreview && (
        <Suspense fallback={<p>ЁЯМА Loading preview...</p>}>
          <h2>Preview</h2>
          <MarkdownPreview markdown="Hello, **world**!" />
        </Suspense>
      )}
    </div>
  );
}
```

ЁЯОп ржПржЦржи ржХрзА рж╣ржмрзЗ?

- ржкрзНрж░ржержорзЗ `MarkdownPreview.js` ржлрж╛ржЗрж▓ рж▓рзЛржб рж╣ржмрзЗ ржирж╛
- ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ React ржмрзБржЭржмрзЗ: ржУрж╣! ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржжрж░ржХрж╛рж░
- рждржЦржи ржлрж╛ржЗрж▓ ржбрж╛ржЗржирж╛ржорж┐ржХрж╛рж▓рж┐ ржЗржорзНржкрзЛрж░рзНржЯ рж╣ржмрзЗ
- ржпрждржХрзНрж╖ржг ржирж╛ рж╣рзЯ, fallback ржжрзЗржЦрж╛ржмрзЗ

---

## ЁЯТб ржЫрзЛржЯрзНржЯ ржЯрзНрж░рж┐ржХ: ржбрж╛ржЗржирж╛ржорж┐ржХрж▓рж┐ ржпрзЗржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж▓рзЛржб ржХрж░рзЛ

```js
import { lazy } from "react";

export function importDemo(file) {
  return lazy(() => import(`../components/${file}.js`));
}
```

```js
const DemoComponent = importDemo("ColorDemo");
```

---

## ЁЯзк ржПржХржЯрж┐ ржоржЬрж╛рж░ Example App

- ржЖржкржирж┐ ржПржХржЯрж╛ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░ржЫрзЗржи
- рж╢рзБржзрзБ рж╕рзЗржЗ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржлрж╛ржЗрж▓ржЗ рж▓рзЛржб рж╣ржЪрзНржЫрзЗ
- Network ржЯрзНржпрж╛ржм ржЦрзБрж▓рзЗ ржжрзЗржЦрзБржи, ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи live!

---

## тЬЕ Best Practice

| ржнрзБрж▓                         | ржарж┐ржХ                                       |
| --------------------------- | ----------------------------------------- |
| ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржнрж┐рждрж░рзЗ `lazy()` | ржлрж╛ржЗрж▓рзЗрж░ ржмрж╛ржЗрж░рзЗ ржЯржк рж▓рзЗржнрзЗрж▓рзЗ                    |
| Error handling ржирж╛ ржХрж░рж╛       | Always wrap in ErrorBoundary              |
| рж╕ржм ржХрж┐ржЫрзБ lazy ржХрж░рзЗ ржлрзЗрж▓рж╛       | рж╢рзБржзрзБ ржпрзЗржЧрзБрж▓рзЛ ржжрзЗрж░рж┐рждрзЗ ржжрж░ржХрж╛рж░, рж╕рзЗржЧрзБрж▓рзЛ lazy ржХрж░рзЛ |

---

## ЁЯЫбя╕П ErrorBoundary ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рж▓рзЗ?

ржпржжрж┐ рж▓рзЗржЬрж┐ ржлрж╛ржЗрж▓ рж▓рзЛржб ржирж╛ рж╣рзЯ (ржпрзЗржоржи ржирзЗржЯржУрзЯрж╛рж░рзНржХ error), рждржЦржи ржЕрзНржпрж╛ржк ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЬржирзНржп:

```js
<ErrorBoundary>
  <Suspense fallback={<Loading />}>
    <MyLazyComponent />
  </Suspense>
</ErrorBoundary>
```

---

## тЪб ржирзЗржХрзНрж╕ржЯ.ржЬрзЗржПрж╕рзЗ рждрж╛рж╣рж▓рзЗ ржжрж░ржХрж╛рж░ ржирж╛ржЗ?

рж╣рзНржпрж╛ржБ, Next.js by default route-based lazy loading ржХрж░рзЗред
рждржмрзБржУ, ржпржжрж┐ ржЖржкржирж┐ ржХрзЛржирзЛ `modal`, `preview`, ржмрж╛ `chart.js` heavy ржХржорзНржкрзЛржирзЗржирзНржЯ lazy ржХрж░рждрзЗ ржЪрж╛ржитАФржПржЯрж╛ рждржЦржиржУ ржЬрж░рзБрж░рж┐ред

---

## ЁЯз╝ рж╕рж╛рж░рж╛ржВрж╢

| рж╢рж┐ржЦрж▓рж╛ржо                             | ржорж╛ржирзЗ                          |
| ---------------------------------- | ----------------------------- |
| `React.lazy()`                     | ржХржорзНржкрзЛржирзЗржирзНржЯ рж╢рзБржзрзБ ржжрж░ржХрж╛рж░ рж╣рж▓рзЗ рж▓рзЛржб |
| `Suspense fallback`                | ржпржЦржи рж▓рзЛржбрж┐ржВ рж╣ржЪрзНржЫрзЗ, рждржЦржи ржХрзА ржжрзЗржЦрж╛ржм |
| Lazy ржлрж╛ржЗрж▓ `default export` рж╣рждрзЗ рж╣ржмрзЗ | ржирж╛ рж╣рж▓рзЗ ржЪрж▓ржмрзЗ ржирж╛                |
| ржлрж╛ржЗрж▓рзЗрж░ ржмрж╛ржЗрж░рзЗ `lazy()`              | ржирж╛ рж╣рж▓рзЗ ржмрж╛рж░ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржмрзЗ     |
| ErrorBoundary                      | fallback ржПрж░рж░ ржзрж░рждрзЗ рж╕рж╣рж╛рзЯ        |

---

## тЬНя╕П рж╢рзЗрж╖ ржХржерж╛

React Lazy Loading рж╣ржЪрзНржЫрзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкржХрзЗ тАЬржмрзБржжрзНржзрж┐ржорж╛ржитАЭ ржмрж╛ржирж╛ржирзЛрж░ ржЙржкрж╛рзЯред
ржпрзЗржЯрж╛ ржмрж▓рзЗтАФтАЬржЖржорж┐ рж╕ржм ржЬрж╛ржирж┐ ржирж╛, ржХрж┐ржирзНрждрзБ ржпрзЗржЯрзБржХрзБ ржжрж░ржХрж╛рж░, ржУржЯрзБржХрзБржЗ рж╢рж┐ржЦрж┐, рждрж╛ржУ рж╕ржорзЯржорждрзЛредтАЭ ЁЯШД
